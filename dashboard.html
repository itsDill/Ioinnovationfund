<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard with Chatbot</title>
    <link rel="stylesheet" href="assets/css/style.css">

    <style>
        /* Styling for Chatbot UI */
        #chatbot {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 300px;
            max-height: 400px;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            background-color: white;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        #chatbot-header {
            background-color: #4CAF50;
            color: white;
            padding: 10px;
            font-size: 18px;
            text-align: center;
        }
        #chatbot-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background-color: #f9f9f9;
        }
        .chat-message {
            margin: 5px 0;
            display: flex;
            align-items: flex-start;
        }
        .user-message {
            text-align: right;
            color: #000;
            justify-content: flex-end;
        }
        .bot-message {
            text-align: left;
            color: #555;
        }
        .chat-message img {
            border-radius: 50%;
            width: 30px;
            height: 30px;
            margin-right: 10px;
        }
        #chatbot-input {
            display: flex;
            padding: 10px;
            border-top: 1px solid #ccc;
            background-color: #f4f4f4;
        }
        #chatbot-input input {
            flex: 1;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        #chatbot-input button {
            margin-left: 10px;
            padding: 8px 15px;
            border: none;
            border-radius: 5px;
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
        }
        #chatbot-input button:hover {
            background-color: #45a049;
        }
    </style>
</head>

<body>
    <!-- Main Dashboard Content -->
    <header>
        <h1>Welcome to the Dashboard</h1>
    </header>
    <main>
        <p>Only logged-in users can see this content.</p>

        <!-- Sales Data Section -->
        <section id="affiliateSales" style="display: none;">
            <h2>Affiliate Sales Data</h2>
            <table class="sales-table">
                <thead>
                    <tr>
                        <th>Affiliate ID</th>
                        <th>Product Name</th>
                        <th>Sales Amount</th>
                        <th>Commission Earned</th>
                        <th>Sale Date</th>
                    </tr>
                </thead>
                <tbody id="salesData"></tbody>
            </table>
        </section>

        <button id="logoutButton">Logout</button>
    </main>

    <!-- Chatbot UI -->
    <div id="chatbot">
        <div id="chatbot-header">Chat with us</div>
        <div id="chatbot-messages"></div>
        <div id="chatbot-input">
            <input type="text" id="chatInput" placeholder="Ask a question...">
            <button id="sendMessage">Send</button>
        </div>
    </div>

    <script>
    const chatMessages = document.getElementById('chatbot-messages');
    const chatInput = document.getElementById('chatInput');
    const sendMessageButton = document.getElementById('sendMessage');

    const botData = {

    "greetings": {
        "questions": ["hello", "heyy", "hi", "hey", "hiya", "hey you", "hii", "good morning", "good afternoon", "good evening", "greetings"],
        "responses": [
            {"type": "text", "content": "Hi there!"},
            {"type": "text", "content": "Hi"}
        ]
    },
    "how_are_you": {
        "questions": ["how are you", "how are you doing", "how's it going", "how have you been", "how's life", "what's up", "how's everything"],
        "responses": [
            {"type": "text", "content": "I'm just a bunch of code, but I'm functioning as expected! How about you?"},
            {"type": "image", "content": "/path/to/your/image.jpg"},
            {"type": "audio", "content": "/path/to/your/audio.mp3"}
        ]
    },
    "response_1": {
        "questions": ["im good", "good", "im good thank you"],
        "responses": [
            {"type": "text", "content": "Great to hear!"},
            {"type": "text", "content": "That’s awesome!"},
            {"type": "text", "content": "Good to know! What's on your mind today?"}
        ]
    },
    "goodbye": {
        "questions": ["bye", "goodbye", "see you", "later", "see you later", "take care", "catch you later"],
        "responses": [
            {"type": "text", "content": "Catch you later!"},
            {"type": "text", "content": "See you soon!"},
            {"type": "text", "content": "Goodbye for now!"},
            {"type": "text", "content": "Take care!"}
        ]
    },
    "show_picture": {
        "questions": ["what you doing?", "what you doing", "what you doing now?"],
        "responses": [
            {"type": "text", "content": "not much, you?!"},
            {"type": "text", "content": "working"},
        ]
    },
    "current_time": {
        "questions": ["whats the time", "what time is it", "current time", "tell me the time", "can you tell me the time"],
        "responses": [
            {"type": "text", "content": "It's {time} now."},
            {"type": "text", "content": "The current time is {time}."},
            {"type": "text", "content": "Right now, it's {time}."}
        ]
    },
    "current_date": {
        "questions": ["whats the date", "what is the date today", "today's date", "tell me the date", "can you tell me the date"],
        "responses": [
            {"type": "text", "content": "Today’s date is {date}."},
            {"type": "text", "content": "It’s {date} today."},
            {"type": "text", "content": "We’ve got {date} on the calendar."}
        ]
    },
    "acknowledgement": {
        "questions": ["ok", "okay", "sure", "alright", "got it", "understood"],
        "responses": [
            {"type": "text", "content": "Got it!"},
            {"type": "text", "content": "Sure thing!"},
            {"type": "text", "content": "OK, understood."},
            {"type": "text", "content": "Alright, let's move forward!"}
        ]
    },
    "why_not": {
        "questions": ["why not", "why can't we", "why can't I", "why can't you"],
        "responses": [
            {"type": "text", "content": "Good question! Let’s figure it out."},
            {"type": "text", "content": "Why not indeed! Let's explore this."},
            {"type": "text", "content": "Hmm, let me check."},
            {"type": "text", "content": "That’s something worth thinking about!"}
        ]
    },
    "show_me_something": {
        "questions": ["show me something", "show me anything", "can you show me something", "can I see something"],
        "responses": [
            {"type": "text", "content": "Here’s something you might like!"},
            {"type": "text", "content": "Check this out!"},
            {"type": "text", "content": "I’ve got something cool for you!"},
            {"type": "text", "content": "Take a look at this!"}
        ]
    },
    "thank_you": {
        "questions": ["thank you", "thanks", "thanks a lot", "thank you very much", "much appreciated", "grateful"],
        "responses": [
            {"type": "text", "content": "You’re welcome! Glad I could help."},
            {"type": "text", "content": "You’re welcome!"}
        ]
    },
    "its_okay": {
        "questions": ["its ok", "it's okay", "its alright", "it's alright", "no problem", "no worries"],
        "responses": [
            {"type": "text", "content": "All good!"},
            {"type": "text", "content": "No worries!"},
            {"type": "text", "content": "Everything’s cool."},
            {"type": "text", "content": "It’s fine, don’t worry!"},
            {"type": "text", "content": "No problem!"}
        ]
    },
    "nice": {
        "questions": ["nice", "cool", "awesome", "great", "fantastic", "amazing"],
        "responses": [
            {"type": "text", "content": "Glad you think so!"},
            {"type": "text", "content": "Thanks!"},
            {"type": "text", "content": "Awesome, right?"},
            {"type": "text", "content": "I know, pretty cool!"},
            {"type": "text", "content": "I’m glad you like it!"}
        ]
    },
    "whats_up": {
        "questions": ["whats up", "what's up", "what's happening", "what's new", "what's going on"],
        "responses": [
            {"type": "text", "content": "Not much, just here to assist!"},
            {"type": "text", "content": "Hey, not much! What about you?"},
            {"type": "text", "content": "Just doing my thing, ready to help! How about you?"},
            {"type": "text", "content": "Everything’s cool! What’s up with you?"}
        ]
    },
    "Game 1": {
        "questions": ["can we play a game?", "can we play a game"],
        "responses": [
            {"type": "text", "content": "Yes ofcourse, im in the mood for a little game... why dont we start with a guessing game?"},
            {"type": "text", "content": "Im not really in the mood"},
            {"type": "text", "content": "hmm, im not sure"},
            {"type": "text", "content": "im busy"}
        ]

},
        // Add more intents and responses here...
    };

    function appendMessage(message, sender) {
        const messageElement = document.createElement('div');
        messageElement.className = 'chat-message ' + (sender === 'user' ? 'user-message' : 'bot-message');

        const messageText = document.createElement('div');
        messageText.className = 'chat-text';
        messageText.innerText = message;

        messageElement.appendChild(messageText);
        chatMessages.appendChild(messageElement);
        chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to the bottom
    }

    function getBotResponse(userMessage) {
        for (const intent in botData) {
            const { questions, responses } = botData[intent];
            if (questions.includes(userMessage.toLowerCase())) {
                const randomResponse = responses[Math.floor(Math.random() * responses.length)];
                return randomResponse.content;
            }
        }
        return "I'm sorry, I don't understand that.";
    }

    function handleUserMessage() {
        const userMessage = chatInput.value.trim();
        if (userMessage) {
            appendMessage(userMessage, 'user'); // Display user message
            chatInput.value = ''; // Clear input

            const botResponse = getBotResponse(userMessage);
            setTimeout(() => {
                appendMessage(botResponse, 'bot'); // Display bot response
            }, 500);
        }
    }

    sendMessageButton.addEventListener('click', handleUserMessage);
    chatInput.addEventListener('keypress', event => {
        if (event.key === 'Enter') {
            handleUserMessage();
        }
    });
        // Check if the user is logged in
        if (!localStorage.getItem('loggedIn')) {
            window.location.href = 'login.html'; // Redirect if not logged in
        } else {
            document.getElementById("affiliateSales").style.display = "block";
        }

        // Populate sales data
        const affiliateSales = [
            { affiliateId: "AFF123", productName: "Product A", salesAmount: "$1000", commissionEarned: "$100", saleDate: "2024-11-01" },
            { affiliateId: "AFF124", productName: "Product B", salesAmount: "$1500", commissionEarned: "$150", saleDate: "2024-11-05" },
            { affiliateId: "AFF125", productName: "Product C", salesAmount: "$2000", commissionEarned: "$200", saleDate: "2024-11-07" }
        ];
        const salesDataContainer = document.getElementById("salesData");
        affiliateSales.forEach(sale => {
            const row = document.createElement("tr");
            row.innerHTML = `
                <td>${sale.affiliateId}</td>
                <td>${sale.productName}</td>
                <td>${sale.salesAmount}</td>
                <td>${sale.commissionEarned}</td>
                <td>${sale.saleDate}</td>
            `;
            salesDataContainer.appendChild(row);
        });
        // Logout button
        document.getElementById('logoutButton').addEventListener('click', () => {
            localStorage.removeItem('loggedIn');
            window.location.href = 'login.html';
        });

</script>



</body>
</html>
